<link rel="import" href="../../../../bower_components/polymer/polymer.html">

<link rel="import" href="../../../../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../../../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../../../bower_components/paper-item/paper-item.html">

<link rel="import" href="../../../../bower_components/iron-resizable-behavior/iron-resizable-behavior.html">

<link rel="import" href="../../../styles/dialog-style.html">
<link rel="import" href="../../../styles/scrollbar-style.html">

<link rel="import" href="./vaccine/ht-pat-vaccine-schema-wallonia.html">
<link rel="import" href="./vaccine/ht-pat-vaccine-schema-flanders.html">


<dom-module id="ht-pat-vaccine-schema-dialog">
    <template>
        <style include="scrollbar-style dialog-style">
            #vaccineSchemaDialog{
                height: calc(98% - 12vh);
                width: 98%;
                max-height: calc(100% - 64px - 48px - 20px); /* 100% - header - margin - footer*/
                min-height: 400px;
                min-width: 800px;
                top: 64px;
            }

            .buttons{
                position: absolute;
                right: 0;
                bottom: 0;
                margin: 0;
            }

            paper-tabs {
                --paper-tabs-selection-bar-color: var(--app-text-color);
            }

            paper-tab {
                --paper-tab-ink: var(--app-secondary-color-dark);
                color: var(--app-text-color);
            }

            paper-tab iron-icon{
                color: var(--app-text-color-disabled);
            }

            paper-tab.iron-selected {
                font-weight: bold;
            }

            paper-tab.iron-selected > iron-icon {
                color: var(--app-text-color);
            }

            .tab-selector {
                height: 48px;
                background: var(--app-secondary-color);
            }

            .content{
                max-height: 100%;
            }



        </style>

        <paper-dialog id="vaccineSchemaDialog">
            <div class="content">
                <paper-tabs class="tab-selector" selected="{{tabs}}" >
                    <paper-tab>
                        <iron-icon class="tabIcon" icon="vaadin:time-backward"></iron-icon> [[localize('vac-sch-histo','Vaccination history',language)]]
                    </paper-tab>
                    <paper-tab>
                        <iron-icon class="tabIcon" icon="vaadin:child"></iron-icon> [[localize('vac-sch-fr','Vaccination schema (French community)',language)]]
                    </paper-tab>
                    <paper-tab>
                        <iron-icon class="tabIcon" icon="vaadin:child"></iron-icon> [[localize('vac-sch-nl','Vaccination schema (Flanders)',language)]]
                    </paper-tab>
                    <!--<paper-tab>[[localize('json_vwr','JSON View',language)]]</paper-tab>-->
                </paper-tabs>
                <iron-pages selected="[[tabs]]">
                    <page>

                    </page>
                    <page>
                        <ht-pat-vaccine-schema-wallonia id="wallonia" api="[[api]]" user="[[user]]" patient="[[patient]]" resources="[[resources]]" language="[[language]]" i18n="[[i18n]]" contacts="[[contacts]]"></ht-pat-vaccine-schema-wallonia>
                    </page>
                    <page>
                        <ht-pat-vaccine-schema-flanders id="flanders" api="[[api]]" user="[[user]]" patient="[[patient]]" esources="[[resources]]" language="[[language]]" i18n="[[i18n]]" contacts="[[contacts]]"></ht-pat-vaccine-schema-flanders>
                    </page>
                </iron-pages>
            </div>
            <div class="buttons">
                <paper-button class="button" on-tap="_createMedicationSchema"><iron-icon icon="icons:add" class="mr5 smallIcon" ></iron-icon> [[localize('add','Create schema',language)]]</paper-button>
                <paper-button class="button" on-tap="_close"><iron-icon icon="icons:close" class="mr5 smallIcon" ></iron-icon> [[localize('clo','Close',language)]]</paper-button>
                <paper-button class="button button--other" on-tap="_refresh"><iron-icon icon="icons:refresh" class="mr5 smallIcon" ></iron-icon> [[localize('refresh','Refresh',language)]]</paper-button>
            </div>
        </paper-dialog>
    </template>
    <script>
        import _ from 'lodash/lodash';

        class HtPatVaccineShemaDialog extends Polymer.TkLocalizerMixin(Polymer.mixinBehaviors([Polymer.IronResizableBehavior], Polymer.Element)) {
            static get is() {
                return 'ht-pat-vaccine-schema-dialog';
            }

            static get properties() {
                return {
                    api: {
                        type: Object,
                        value: null
                    },
                    user: {
                        type: Object,
                        value: null
                    },
                    language: {
                        type: String
                    },
                    tabs:{
                        type: Number,
                        value: 0
                    }
                };
            }

            static get observers() {
                return [];
            }

            ready() {
                super.ready();
            }

            _openDialog(){
                this.$['vaccineSchemaDialog'].open();
                this.$['wallonia'].initialize();
            }

            _createMedicationSchema() {
                this.$['wallonia'].createMedicationSchema();
            }

            _close(){
                this.$['vaccineSchemaDialog'].close()
            }


        }
        customElements.define(HtPatVaccineShemaDialog.is, HtPatVaccineShemaDialog);
    </script>
</dom-module>

